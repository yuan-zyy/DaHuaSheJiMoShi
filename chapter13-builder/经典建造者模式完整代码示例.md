# 经典建造者模式完整代码示例

经典建造者模式包含**4个核心角色**：产品（Product）、抽象建造者（Abstract Builder）、具体建造者（Concrete Builder）、指挥者（Director）。下面以“汽车组装”为例，通过完整代码演示其实现流程。

## 一、核心角色说明

1.  **产品（Product）**：需要构建的复杂对象（本文为`Car`，包含CPU、内存等核心部件）

2.  **抽象建造者（Abstract Builder）**：定义对象构建的标准化步骤（接口/抽象类），不涉及具体实现

3.  **具体建造者（Concrete Builder）**：实现抽象建造者的方法，完成具体对象的属性赋值和构建

4.  **指挥者（Director）**：统一调度建造者的构建步骤，无需关心具体构建细节，只负责流程把控

## 二、完整代码实现

### 1. 产品类（Product）：Car（汽车，需要构建的复杂对象）

```java

/**
 * 产品类：汽车（需要构建的复杂对象）
 * 包含多个核心部件，是建造者模式的构建目标
 */
public class Car {
    // 汽车核心部件
    private String engine;    // 发动机
    private String chassis;   // 底盘
    private String body;      // 车身
    private String tires;     // 轮胎

    // 提供setter方法（供建造者赋值），getter方法（获取属性）和toString（打印信息）
    public void setEngine(String engine) {
        this.engine = engine;
    }

    public void setChassis(String chassis) {
        this.chassis = chassis;
    }

    public void setBody(String body) {
        this.body = body;
    }

    public void setTires(String tires) {
        this.tires = tires;
    }

    public String getEngine() {
        return engine;
    }

    public String getChassis() {
        return chassis;
    }

    public String getBody() {
        return body;
    }

    public String getTires() {
        return tires;
    }

    @Override
    public String toString() {
        return "Car{" +
                "发动机='" + engine + '\'' +
                ", 底盘='" + chassis + '\'' +
                ", 车身='" + body + '\'' +
                ", 轮胎='" + tires + '\'' +
                '}';
    }
}
```

### 2. 抽象建造者（Abstract Builder）：CarBuilder（定义汽车构建标准步骤）

```java

/**
 * 抽象建造者：汽车建造者
 * 定义汽车构建的标准化步骤，不涉及具体实现
 * 所有具体建造者都需实现该接口/抽象类
 */
public abstract class CarBuilder {
    // 持有产品对象，供子类赋值和返回
    protected Car car = new Car();

    // 标准化构建步骤1：构建发动机
    public abstract void buildEngine();

    // 标准化构建步骤2：构建底盘
    public abstract void buildChassis();

    // 标准化构建步骤3：构建车身
    public abstract void buildBody();

    // 标准化构建步骤4：构建轮胎
    public abstract void buildTires();

    // 返回构建完成的汽车对象
    public Car getCar() {
        return this.car;
    }
}
```

### 3. 具体建造者（Concrete Builder）1：LuxuryCarBuilder（豪华汽车建造者）

```java

/**
 * 具体建造者1：豪华汽车建造者
 * 实现抽象建造者的所有方法，构建高配置的豪华汽车
 */
public class LuxuryCarBuilder extends CarBuilder {
    @Override
    public void buildEngine() {
        // 豪华汽车：高性能V8发动机
        car.setEngine("高性能V8涡轮增压发动机");
    }

    @Override
    public void buildChassis() {
        // 豪华汽车：空气悬挂底盘
        car.setChassis("空气悬挂高端底盘");
    }

    @Override
    public void buildBody() {
        // 豪华汽车：全铝轻量化车身
        car.setBody("全铝轻量化流线型车身");
    }

    @Override
    public void buildTires() {
        // 豪华汽车：米其林高性能轮胎
        car.setTires("米其林PS4高性能防爆轮胎");
    }
}
```

### 4. 具体建造者（Concrete Builder）2：OrdinaryCarBuilder（普通汽车建造者）

```java

/**
 * 具体建造者2：普通汽车建造者
 * 实现抽象建造者的所有方法，构建基础配置的普通汽车
 */
public class OrdinaryCarBuilder extends CarBuilder {
    @Override
    public void buildEngine() {
        // 普通汽车：基础四缸发动机
        car.setEngine("1.5L四缸自然吸气发动机");
    }

    @Override
    public void buildChassis() {
        // 普通汽车：传统钢制底盘
        car.setChassis("传统钢制舒适型底盘");
    }

    @Override
    public void buildBody() {
        // 普通汽车：钢制车身
        car.setBody("普通钢制家用车身");
    }

    @Override
    public void buildTires() {
        // 普通汽车：国产经济型轮胎
        car.setTires("国产朝阳经济型耐磨轮胎");
    }
}
```

### 5. 指挥者（Director）：CarDirector（汽车组装指挥者）

```java

/**
 * 指挥者：汽车组装指挥者
 * 负责统一调度建造者的构建步骤，把控构建流程
 * 无需关心具体建造细节，只需要调用标准化步骤
 */
public class CarDirector {
    /**
     * 构建汽车的统一方法
     * @param carBuilder 具体建造者对象（豪华/普通汽车建造者）
     * @return 构建完成的汽车对象
     */
    public Car constructCar(CarBuilder carBuilder) {
        // 严格按照标准化步骤执行构建（顺序固定，保证构建一致性）
        carBuilder.buildEngine();   // 第一步：构建发动机
        carBuilder.buildChassis();  // 第二步：构建底盘
        carBuilder.buildBody();     // 第三步：构建车身
        carBuilder.buildTires();    // 第四步：构建轮胎
        // 返回构建完成的汽车
        return carBuilder.getCar();
    }
}
```

### 6. 测试类（Client）：验证经典建造者模式

```java

/**
 * 测试类：验证经典建造者模式的使用
 * 演示如何通过指挥者+不同建造者，构建不同类型的汽车
 */
public class ClassicBuilderPatternTest {
    public static void main(String[] args) {
        // 1. 创建指挥者（统一调度构建流程）
        CarDirector carDirector = new CarDirector();

        // 2. 构建豪华汽车
        // 创建豪华汽车建造者
        CarBuilder luxuryCarBuilder = new LuxuryCarBuilder();
        // 指挥者调度构建豪华汽车
        Car luxuryCar = carDirector.constructCar(luxuryCarBuilder);
        System.out.println("豪华汽车配置：" + luxuryCar);

        System.out.println("====================================");

        // 3. 构建普通汽车
        // 创建普通汽车建造者
        CarBuilder ordinaryCarBuilder = new OrdinaryCarBuilder();
        // 指挥者调度构建普通汽车
        Car ordinaryCar = carDirector.constructCar(ordinaryCarBuilder);
        System.out.println("普通汽车配置：" + ordinaryCar);
    }
}
```

## 三、运行结果

```Plain Text

豪华汽车配置：Car{发动机='高性能V8涡轮增压发动机', 底盘='空气悬挂高端底盘', 车身='全铝轻量化流线型车身', 轮胎='米其林PS4高性能防爆轮胎'}
====================================
普通汽车配置：Car{发动机='1.5L四缸自然吸气发动机', 底盘='传统钢制舒适型底盘', 车身='普通钢制家用车身', 轮胎='国产朝阳经济型耐磨轮胎'}
```

## 四、经典建造者模式核心特性总结

1.  **流程统一**：指挥者（`CarDirector`）固定了构建步骤（发动机→底盘→车身→轮胎），确保所有汽车的构建流程一致，避免遗漏部件。

2.  **表示分离**：同样的构建流程（指挥者的`constructCar`方法），通过不同的具体建造者（豪华/普通），构建出不同配置的汽车（不同表示）。

3.  **职责单一**：

- 建造者：只负责构建对象的具体属性，不关心流程。

- 指挥者：只负责调度流程，不关心具体属性赋值。

- 产品：只负责存储属性，不关心构建逻辑。

4.  **灵活扩展**：如果需要新增“新能源汽车”，只需新增`NewEnergyCarBuilder`（实现`CarBuilder`），无需修改现有代码，符合“开闭原则”。
> （注：文档部分内容可能由 AI 生成）